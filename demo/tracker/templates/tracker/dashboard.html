{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - Goods Price Tracker</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <!-- Header -->
  <div class="page-header">
    <!-- Left: Logo + Title -->
    <div class="logo-title">
      <img src="{% static 'images/logo.png' %}" alt="Logo" class="logo">
      <span>Goods Price Tracker</span>
    </div>

    <!-- Center: Nav links -->
    <div class="nav-links">
      {% if request.user.is_authenticated %}
        <a href="{% url 'watchlist' %}">Watchlist</a>
        <a href="{% url 'review' %}">Review</a>
      {% endif %}
    </div>

    <!-- Right: Auth / Guest buttons -->
    <div class="top-right">
      {% if request.user.is_authenticated %}
        <span>Welcome, {{ request.user.username }}</span>
        <a href="{% url 'login' %}"><button type="button">Logout</button></a>
      {% else %}
        <a href="{% url 'signup' %}">Sign Up</a>
        <a href="{% url 'login' %}">Login</a>
      {% endif %}
    </div>
  </div>

  <!-- Search bar -->
  <div class="center">
    <input type="text" id="searchInput" placeholder="Search Product" autocomplete="off">
    <ul id="searchResults" class="search-results"></ul>
  </div>

  <!-- Tags filter -->
  <div class="tags-bar">
    <a href="?tag=all" class="tag {% if selected_tag == 'all' %}active{% endif %}">All</a>
    {% for t in tags %}
      <a href="?tag={{ t }}" class="tag {% if selected_tag == t %}active{% endif %}">{{ t }}</a>
    {% endfor %}
  </div>

  <!-- Products grid -->
  <div class="products-grid">
    {% for p in products %}
      <a href="{% url 'product_detail' p.product_id %}" class="product-card">
        {% if p.image %}
          <img src="{{ p.image.url }}" alt="{{ p.name }}">
        {% else %}
          <img src="{% static 'images/default.png' %}" alt="No image">
        {% endif %}
        <h4>{{ p.name }}</h4>
        <div class="price-box">â‚¹{{ p.price }}</div>
      </a>
    {% empty %}
      <p style="text-align:center; margin-top:20px;">No products available.</p>
    {% endfor %}
  </div>

  <!-- Show more -->
  <div class="center">
    <a href="?tag={{ selected_tag }}&limit={{ limit|add:20 }}">
      <button>Show More</button>
    </a>
  </div>

  <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
